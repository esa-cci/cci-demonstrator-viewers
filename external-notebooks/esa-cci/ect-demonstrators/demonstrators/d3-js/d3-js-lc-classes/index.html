<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Visualising Land Cover Class Change with Altair - CCI Examples</title><meta property="og:title" content="Visualising Land Cover Class Change with Altair - CCI Examples"/><meta name="generator" content="mystmd"/><meta name="description" content="Collection of examples relevant to the CCI activity"/><meta property="og:description" content="Collection of examples relevant to the CCI activity"/><meta name="keywords" content=""/><link rel="stylesheet" href="/cci-demonstrator-viewers/build/_assets/app-SDGCW62C.css"/><link rel="stylesheet" href="/cci-demonstrator-viewers/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/cci-demonstrator-viewers/favicon.ico"/><link rel="stylesheet" href="/cci-demonstrator-viewers/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="myst-skip-to-article fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article content</a></div><dialog id="myst-no-css" style="position:fixed;left:0px;top:0px;width:100vw;height:100vh;font-size:4rem;padding:1rem;color:black;background:white"><strong>Site not loading correctly?</strong><p>This may be due to an incorrect <code>BASE_URL</code> configuration. See<!-- --> <a href="https://mystmd.org/guide/deployment#deploy-base-url">the MyST Documentation</a> <!-- -->for reference.</p><script>
    (() => {
            // Test for has-styling variable set by the MyST stylesheet
            const node = document.currentScript.parentNode;
            const hasCSS = window.getComputedStyle(node).getPropertyValue("--has-styling");
            if (hasCSS === ""){
                    node.showModal();
            }

    })()
</script></dialog><div class="myst-top-nav bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="myst-top-nav-bar flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block lg:hidden"><button class="myst-top-nav-menu-button flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="myst-home-link flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/cci-demonstrator-viewers/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R75cp:" data-state="closed" class="myst-search-bar flex items-center h-10 aspect-square sm:w-64 text-left text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 myst-search-bar-disabled hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="myst-search-text-placeholder hidden sm:block grow">Search</span><div aria-hidden="true" class="myst-search-shortcut items-center hidden mx-1 font-mono text-sm text-gray-600 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="myst-theme-button theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-moon-icon h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-sun-icon h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="myst-primary-sidebar fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] lg:hidden hidden z-10" style="top:60px"><div class="myst-primary-sidebar-pointer pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="myst-primary-sidebar-nav flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="myst-primary-sidebar-topnav overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="myst-fm-block mb-8 pt-9"><div class="myst-fm-block-header flex items-center mb-5 h-6 text-sm font-light"><div class="myst-fm-block-subject flex-none pr-2 smallcaps">CCI Examples</div><div class="flex-grow"></div><div class="myst-fm-block-badges"><a href="https://github.com/esa-cci/cci-notebook-viewers" title="GitHub Repository: esa-cci/cci-notebook-viewers" target="_blank" rel="noopener noreferrer" class="myst-fm-github-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-github-icon inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a></div><a href="https://github.com/esa-cci/cci-notebook-viewers/edit/main/external_notebooks/esa-cci/ect-demonstrators/demonstrators/D3_js/D3_js_LC_Classes.ipynb" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="myst-fm-edit-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-edit-icon inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="myst-fm-downloads-dropdown relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="myst-fm-downloads-button relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8ucp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-downloads-icon"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="myst-fm-block-title mb-0">Visualising Land Cover Class Change with Altair</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="rgoQddp241" class="myst-jp-nb-block relative group/block"><p>This notebook is one of three notebooks that serve to show how the ESA CCI Toolbox can be used with D3.js. Here, we will show how the classes of a Land Cover Dataset can be summed up and their change over time can be visualised in a D3.js chart accessed over the Altair library. Several preprocessing steps are applied, partly using operations from the CCI Toolbox.</p></div><div id="CEiD9v7xMk" class="myst-jp-nb-block relative group/block"><p>For this notebook, we use the altair library. Install it into your Python environment if you haven’t already done so:</p></div><div id="rLWm7XlvhW" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># ! mamba install --yes altair</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="kR5wyXlKq4T8lgMWp80Ed" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="NpELbEU2UA" class="myst-jp-nb-block relative group/block"><p>Now we can make all the necessary imports.</p></div><div id="QLOfZpZXw4" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import altair as alt
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd

from esa_climate_toolbox.core import get_op
from esa_climate_toolbox.core import list_ecv_datasets
from esa_climate_toolbox.core import open_data</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="6ckZCdLJTm5ZRSWc6CULy" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="L2pwHsHnyy" class="myst-jp-nb-block relative group/block"><p>We start by listing all the Land Cover Datasets. For more information on Land Cover Data, see here: <a target="_blank" rel="noreferrer" href="https://climate.esa.int/en/projects/land-cover/" class="">https://<wbr/>climate<wbr/>.esa<wbr/>.int<wbr/>/en<wbr/>/projects<wbr/>/land<wbr/>-cover/</a>.</p></div><div id="Gx6j1mpz4b" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">list_ecv_datasets(&quot;LC&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="chLNHvQFMR1mYfgEblrh3" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>[(&#x27;esacci.LC.13-yrs.L4.WB.ASAR.Envisat.Map.4-0.r1&#x27;, &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.5-yrs.L4.CHANGE.multi-sensor.multi-platform.HRLCC30-A01.v1-2.Africa&#x27;,
  &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.5-yrs.L4.CHANGE.multi-sensor.multi-platform.HRLCC30-A02.v1-2.Amazonia&#x27;,
  &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.5-yrs.L4.CHANGE.multi-sensor.multi-platform.HRLCC30-A03.v1-2.Siberia&#x27;,
  &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.5-yrs.L4.Map.multi-sensor.multi-platform.HRLC30-A01.v1-2.Africa&#x27;,
  &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.5-yrs.L4.Map.multi-sensor.multi-platform.HRLC30-A02.v1-2.Amazonia&#x27;,
  &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.5-yrs.L4.Map.multi-sensor.multi-platform.HRLC30-A03.v1-2.Siberia&#x27;,
  &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.yr.L4.LCCS.multi-sensor.multi-platform.Map.2-0-7.r1&#x27;, &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.yr.L4.Map.multi-sensor.multi-platform.HRLC10-A01.v1-2.Africa&#x27;,
  &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.yr.L4.Map.multi-sensor.multi-platform.HRLC10-A02.v1-2.Amazonia&#x27;,
  &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.yr.L4.Map.multi-sensor.multi-platform.HRLC10-A03.v1-2.Siberia&#x27;,
  &#x27;esa-cci&#x27;),
 (&#x27;esacci.LC.yr.L4.PFT.Unspecified.Unspecified.Map.2-0-8.r1&#x27;, &#x27;esa-cci&#x27;),
 (&#x27;ESACCI-LC-L4-LCCS-Map-300m-P1Y-1992-2015-v2.0.7b-kr1.1&#x27;, &#x27;esa-cci-kc&#x27;),
 (&#x27;ESACCI-LC-L4-PFT-Map-300m-P1Y-1992-2020-v2.0.8-kr1.1&#x27;, &#x27;esa-cci-kc&#x27;),
 (&#x27;ESACCI-LC-L4-LCCS-Map-300m-P1Y-1992-2015-v2.0.7b.zarr&#x27;, &#x27;esa-cci-zarr&#x27;)]</span></code></div></div></div><div id="NbaPgCK1vk" class="myst-jp-nb-block relative group/block"><p>Of these, we open the one provided from the zarr store, using the toolbox’ <code>open_data</code> function. Note this method returns a tuple, consisting of the data and its identifier. We are only interested in the data here.</p></div><div id="Rho3FLflAD" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">lc_ds, _ = open_data(&quot;ESACCI-LC-L4-LCCS-Map-300m-P1Y-1992-2015-v2.0.7b.zarr&quot;, data_store_id=&quot;esa-cci-zarr&quot;)
lc_ds</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="TP-a23l1dP0k30XTA5Ein" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="o8Q9CU5xGu" class="myst-jp-nb-block relative group/block"><p>This dataset shows global land cover classes for the years from 1992 to 2015. The spatial is very large. We therefore want to focus on a smaller region, covering the Amazon rain forest. For subsetting, we use the toolbox’ <code>subset_spatial</code> operation. The region is passed in as a string in the form of “min_lon, min_lat, max_lon, max_lat”.</p></div><div id="RXTqGFju7P" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">subset_spatial = get_op(&quot;subset_spatial&quot;)
lc_ds_sub = subset_spatial(lc_ds, region=&quot;-61, -5, -47, 2&quot;)
lc_ds_sub</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="HDAQ57wfGflLG9Tx4jVmA" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="GxypSTOZ8N" class="myst-jp-nb-block relative group/block"><p>Now that we have made the dataset somewhat smaller, we may plot the data for the first and last timestep.</p></div><div id="v7hd2OvtVc" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">%matplotlib inline
lc_ds_sub.lccs_class.isel(time=0).plot(figsize=(10, 5))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="h3H3ncUvwSo_J_inIwLPL" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cci-demonstrator-viewers/build/d8d6e538ac63338ed1f171f0ca55d579.png" alt="&lt;Figure size 1000x500 with 2 Axes&gt;"/></div></div></div><div id="I3vdJvc3MM" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">lc_ds_sub.lccs_class.isel(time=-1).plot(figsize=(10, 5))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="RLcfvYL3ZWE3t7qp17_Sg" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-image"><img src="/cci-demonstrator-viewers/build/6ed7feec61b7f3896cd4d3e1128ab952.png" alt="&lt;Figure size 1000x500 with 2 Axes&gt;"/></div></div></div><div id="lLXt9W4hjz" class="myst-jp-nb-block relative group/block"><p>It seems there are some differences. It might be good to look them up in more detail. If we look at the metadata of <code>lccs_class</code>, we see that flags and their meanings are defined. We have a look at the flag values first.</p></div><div id="cD9aJEzZzf" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">lc_flag_values = np.array(lc_ds_sub.lccs_class.attrs.get(&quot;flag_values&quot;))
lc_flag_values</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="sGjVGlKmWkFNXZLvpxUGZ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>array([   0,   10,   11,   12,   20,   30,   40,   50,   60,   61,   62,
         70,   71,   72,   80,   81,   82,   90,  100,  110,  120,  121,
        122, -126, -116, -106, -105, -104, -103,  -96,  -86,  -76,  -66,
        -56,  -55,  -54,  -46,  -36])</span></code></div></div></div><div id="YQScM9ZuYe" class="myst-jp-nb-block relative group/block"><p>Apparently, there was a mix-up with unsigned values. To account for this, we add the value 256 to all negative flag values in this list (not in the dataset itself, where the values are fine).</p></div><div id="ZSeUzqn5yb" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">lc_flag_values = np.where(lc_flag_values &lt; 0, lc_flag_values + 256, lc_flag_values).astype(np.uint8)
lc_flag_values</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="CBhx1JSbXvwtFUI0GTn4c" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>array([  0,  10,  11,  12,  20,  30,  40,  50,  60,  61,  62,  70,  71,
        72,  80,  81,  82,  90, 100, 110, 120, 121, 122, 130, 140, 150,
       151, 152, 153, 160, 170, 180, 190, 200, 201, 202, 210, 220],
      dtype=uint8)</span></code></div></div></div><div id="A1HIZYSaQR" class="myst-jp-nb-block relative group/block"><p>This is better. We now extract the flag meanings. As these are given in one big string, we split it whenver we encounter a space.</p></div><div id="Jd0362EU0S" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">lc_flag_meanings = lc_ds_sub.lccs_class.attrs.get(&quot;flag_meanings&quot;)
lc_flag_meanings = lc_flag_meanings.split(&quot; &quot;)
lc_flag_meanings</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="tUV4_XFtLC811K5DrMf9H" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>[&#x27;no_data&#x27;,
 &#x27;cropland_rainfed&#x27;,
 &#x27;cropland_rainfed_herbaceous_cover&#x27;,
 &#x27;cropland_rainfed_tree_or_shrub_cover&#x27;,
 &#x27;cropland_irrigated&#x27;,
 &#x27;mosaic_cropland&#x27;,
 &#x27;mosaic_natural_vegetation&#x27;,
 &#x27;tree_broadleaved_evergreen_closed_to_open&#x27;,
 &#x27;tree_broadleaved_deciduous_closed_to_open&#x27;,
 &#x27;tree_broadleaved_deciduous_closed&#x27;,
 &#x27;tree_broadleaved_deciduous_open&#x27;,
 &#x27;tree_needleleaved_evergreen_closed_to_open&#x27;,
 &#x27;tree_needleleaved_evergreen_closed&#x27;,
 &#x27;tree_needleleaved_evergreen_open&#x27;,
 &#x27;tree_needleleaved_deciduous_closed_to_open&#x27;,
 &#x27;tree_needleleaved_deciduous_closed&#x27;,
 &#x27;tree_needleleaved_deciduous_open&#x27;,
 &#x27;tree_mixed&#x27;,
 &#x27;mosaic_tree_and_shrub&#x27;,
 &#x27;mosaic_herbaceous&#x27;,
 &#x27;shrubland&#x27;,
 &#x27;shrubland_evergreen&#x27;,
 &#x27;shrubland_deciduous&#x27;,
 &#x27;grassland&#x27;,
 &#x27;lichens_and_mosses&#x27;,
 &#x27;sparse_vegetation&#x27;,
 &#x27;sparse_tree&#x27;,
 &#x27;sparse_shrub&#x27;,
 &#x27;sparse_herbaceous&#x27;,
 &#x27;tree_cover_flooded_fresh_or_brakish_water&#x27;,
 &#x27;tree_cover_flooded_saline_water&#x27;,
 &#x27;shrub_or_herbaceous_cover_flooded&#x27;,
 &#x27;urban&#x27;,
 &#x27;bare_areas&#x27;,
 &#x27;bare_areas_consolidated&#x27;,
 &#x27;bare_areas_unconsolidated&#x27;,
 &#x27;water&#x27;,
 &#x27;snow_and_ice&#x27;]</span></code></div></div></div><div id="uOwSX6qazt" class="myst-jp-nb-block relative group/block"><p>Now we simply combine these to have pairs of flag values and flag meanings.</p></div><div id="UKAJoqlJgZ" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">lc_flags = [(lc_flag_values[i], lc_flag_meanings[i]) for i in range(len(lc_flag_values))]
lc_flags</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="FTDo18T5D6x7YGiu2aKZ8" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-text" class="font-mono text-sm whitespace-pre-wrap myst-jp-safe-output-text"><code><span>[(np.uint8(0), &#x27;no_data&#x27;),
 (np.uint8(10), &#x27;cropland_rainfed&#x27;),
 (np.uint8(11), &#x27;cropland_rainfed_herbaceous_cover&#x27;),
 (np.uint8(12), &#x27;cropland_rainfed_tree_or_shrub_cover&#x27;),
 (np.uint8(20), &#x27;cropland_irrigated&#x27;),
 (np.uint8(30), &#x27;mosaic_cropland&#x27;),
 (np.uint8(40), &#x27;mosaic_natural_vegetation&#x27;),
 (np.uint8(50), &#x27;tree_broadleaved_evergreen_closed_to_open&#x27;),
 (np.uint8(60), &#x27;tree_broadleaved_deciduous_closed_to_open&#x27;),
 (np.uint8(61), &#x27;tree_broadleaved_deciduous_closed&#x27;),
 (np.uint8(62), &#x27;tree_broadleaved_deciduous_open&#x27;),
 (np.uint8(70), &#x27;tree_needleleaved_evergreen_closed_to_open&#x27;),
 (np.uint8(71), &#x27;tree_needleleaved_evergreen_closed&#x27;),
 (np.uint8(72), &#x27;tree_needleleaved_evergreen_open&#x27;),
 (np.uint8(80), &#x27;tree_needleleaved_deciduous_closed_to_open&#x27;),
 (np.uint8(81), &#x27;tree_needleleaved_deciduous_closed&#x27;),
 (np.uint8(82), &#x27;tree_needleleaved_deciduous_open&#x27;),
 (np.uint8(90), &#x27;tree_mixed&#x27;),
 (np.uint8(100), &#x27;mosaic_tree_and_shrub&#x27;),
 (np.uint8(110), &#x27;mosaic_herbaceous&#x27;),
 (np.uint8(120), &#x27;shrubland&#x27;),
 (np.uint8(121), &#x27;shrubland_evergreen&#x27;),
 (np.uint8(122), &#x27;shrubland_deciduous&#x27;),
 (np.uint8(130), &#x27;grassland&#x27;),
 (np.uint8(140), &#x27;lichens_and_mosses&#x27;),
 (np.uint8(150), &#x27;sparse_vegetation&#x27;),
 (np.uint8(151), &#x27;sparse_tree&#x27;),
 (np.uint8(152), &#x27;sparse_shrub&#x27;),
 (np.uint8(153), &#x27;sparse_herbaceous&#x27;),
 (np.uint8(160), &#x27;tree_cover_flooded_fresh_or_brakish_water&#x27;),
 (np.uint8(170), &#x27;tree_cover_flooded_saline_water&#x27;),
 (np.uint8(180), &#x27;shrub_or_herbaceous_cover_flooded&#x27;),
 (np.uint8(190), &#x27;urban&#x27;),
 (np.uint8(200), &#x27;bare_areas&#x27;),
 (np.uint8(201), &#x27;bare_areas_consolidated&#x27;),
 (np.uint8(202), &#x27;bare_areas_unconsolidated&#x27;),
 (np.uint8(210), &#x27;water&#x27;),
 (np.uint8(220), &#x27;snow_and_ice&#x27;)]</span></code></div></div></div><div id="b9TRvsKKCU" class="myst-jp-nb-block relative group/block"><p>As the metadata is prepared, we can continue with preparing the LC dataset to be used with Altair. Now, as Altair expects pandas dataframes, we need to convert it. We could use the <code>to_dataframe</code> operation from the toolbox (which eventually is used in the other notebooks), but here we want to apply an additional step, where we count the number of occurences per class in each year. We therefore write a dedicated function. As this takes a little time to complete, we print out the time as means to measure the progress.</p></div><div id="VKHSJ4kRaX" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">lc_data = []
for i, t in enumerate(lc_ds_sub.time):
    date = pd.Timestamp(t.values).strftime(&quot;%Y-%m-%d&quot;)
    print(date)
    for lc_flag, lc_flag_name in lc_flags:
        if lc_flag_name == &quot;no_data&quot;:
            continue
        flag_count = (lc_ds_sub.isel(time=i)[&quot;lccs_class&quot;] == lc_flag).sum().values
        lc_data.append({
            &quot;date&quot;: date,
            &quot;lc_class&quot;: lc_flag_name,
            &quot;lc_count&quot;: flag_count
        })
df = pd.DataFrame(lc_data)
df</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="ZkJnlGiDgs5FPd4wCojA6" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>1992-07-02
1993-07-03
1994-07-03
1995-07-03
1996-07-02
1997-07-03
1998-07-03
1999-07-03
2000-07-02
2001-07-03
2002-07-03
2003-07-03
2004-07-02
2005-07-03
2006-07-03
2007-07-03
2008-07-02
2009-07-03
2010-07-03
2011-07-03
2012-07-02
2013-07-03
2014-07-03
2015-07-03
</span></code></pre></div></div><div><div class="p-2.5">Loading...</div></div></div></div><div id="RF7eUvB0FS" class="myst-jp-nb-block relative group/block"><p>We end up with a dataframe that can be used with Altair. However, on closer inspection, there are a few classes that are not present in our subset. We remove these from the dataframe.</p></div><div id="T2CYanPcpn" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">for lc_flag, lc_flag_name in lc_flags:
    lc_count_sum = df[df[&quot;lc_class&quot;] == lc_flag_name].lc_count.sum()
    if lc_count_sum == 0:
        print(f&quot;Removing {lc_flag_name} from data frame&quot;)
        df = df[df[&quot;lc_class&quot;] != lc_flag_name]
df</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="B6uhkr_5_jC44Y79596WU" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div data-name="safe-output-stream"><div><pre class="myst-jp-stream-output text-sm font-thin font-system"><code><span>Removing no_data from data frame
Removing cropland_rainfed_tree_or_shrub_cover from data frame
Removing cropland_irrigated from data frame
Removing tree_needleleaved_evergreen_closed_to_open from data frame
Removing tree_needleleaved_evergreen_closed from data frame
Removing tree_needleleaved_evergreen_open from data frame
Removing tree_needleleaved_deciduous_closed from data frame
Removing tree_needleleaved_deciduous_open from data frame
Removing tree_mixed from data frame
Removing shrubland_evergreen from data frame
Removing shrubland_deciduous from data frame
Removing lichens_and_mosses from data frame
Removing sparse_tree from data frame
Removing sparse_shrub from data frame
Removing bare_areas_consolidated from data frame
Removing bare_areas_unconsolidated from data frame
Removing snow_and_ice from data frame
</span></code></pre></div></div><div><div class="p-2.5">Loading...</div></div></div></div><div id="tVYqAW6vrc" class="myst-jp-nb-block relative group/block"><p>Finally, we can create a stacked chart from the Altair library. We assign the x-axis to display the date, the y-axis to show the occurences per class, and we assign a different color to each of the classes.</p></div><div id="wJAS0AaPXd" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">alt.Chart(df).mark_area().encode(
    x=&quot;date:T&quot;,
    y=alt.Y(&quot;lc_count:Q&quot;),
    color=&quot;lc_class:N&quot;
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="EtIqZlWP4lfWBNj5uaTbq" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="ibjIpSw1FE" class="myst-jp-nb-block relative group/block"><p>A clear increase of cropland becomes visible, with a simultaneous decrease of natural herbaceous vegetation. Note that on the top right of the chart, you can open a menu that provides you with image export options, as well as an alternative insight into the data.</p></div><div class="myst-backmatter-parts"></div></article></main><script>((a,l)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let d=JSON.parse(sessionStorage.getItem(a)||"{}")[l||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(u){console.error(u),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/cci-demonstrator-viewers/build/entry.client-PCJPW7TK.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-AQ2CODAG.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-JJXTQVMA.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-OZE3FFNP.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-N76G4W6Y.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-C4DFGG5C.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-J7TUH54J.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-FZ2S7OYD.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-JEM6JXYA.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-34XIY2DH.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-KQM5FBHR.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-7HNKBP4B.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-CUKUDK3R.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-3EBOCCHJ.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-O4VQNZ62.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-4OEDG4JQ.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/root-AA24SA6C.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/_shared/chunk-AH7OE64W.js"/><link rel="modulepreload" href="/cci-demonstrator-viewers/build/routes/$-5SFLQWPV.js"/><script>window.__remixContext = {"url":"/external-notebooks/esa-cci/ect-demonstrators/demonstrators/d3-js/d3-js-lc-classes","state":{"loaderData":{"root":{"config":{"version":3,"myst":"1.7.0","options":{"hide_toc":true,"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"subject":"CCI Examples","title":"CCI Examples","description":"Collection of examples relevant to the CCI activity","github":"https://github.com/esa-cci/cci-notebook-viewers","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Esa Cci","level":2},{"title":"Ect Demonstrators","level":3},{"slug":"external-notebooks.esa-cci.ect-demonstrators.readme","title":"ect-demonstrators","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Demonstrators","level":4},{"title":"Airflow","level":5},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.airflow.readme","title":"Airflow Demonstrator","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"CDSE","level":5},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.cdse.matching-fire-data-with-sentinel-2-observations","title":"Matching FIRE Data with Sentinel-2 Observations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.cdse.matching-lst-data-with-a-sentinel-3-cube","title":"Matching LST Data with a Sentinel-3 Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.cdse.readme","title":"CDSE Demonstrators","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"D3 Js","level":5},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.readme","title":"D3.js Demonstrators","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.d3-js-lc-classes","title":"Visualising Land Cover Class Change with Altair","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.d3-js-visualise-uncertainties","title":"Visualizing Cloud Fraction Uncertainties with Altair and Plotly","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.d3-js-visualize-4d-data","title":"Visualizing 4-dimensional Data with Altair and Plotly","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/cci-demonstrator-viewers"},"routes/$":{"config":{"version":3,"myst":"1.7.0","options":{"hide_toc":true,"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"subject":"CCI Examples","title":"CCI Examples","description":"Collection of examples relevant to the CCI activity","github":"https://github.com/esa-cci/cci-notebook-viewers","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Esa Cci","level":2},{"title":"Ect Demonstrators","level":3},{"slug":"external-notebooks.esa-cci.ect-demonstrators.readme","title":"ect-demonstrators","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Demonstrators","level":4},{"title":"Airflow","level":5},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.airflow.readme","title":"Airflow Demonstrator","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"CDSE","level":5},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.cdse.matching-fire-data-with-sentinel-2-observations","title":"Matching FIRE Data with Sentinel-2 Observations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.cdse.matching-lst-data-with-a-sentinel-3-cube","title":"Matching LST Data with a Sentinel-3 Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.cdse.readme","title":"CDSE Demonstrators","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"D3 Js","level":5},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.readme","title":"D3.js Demonstrators","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.d3-js-lc-classes","title":"Visualising Land Cover Class Change with Altair","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.d3-js-visualise-uncertainties","title":"Visualizing Cloud Fraction Uncertainties with Altair and Plotly","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.d3-js-visualize-4d-data","title":"Visualizing 4-dimensional Data with Altair and Plotly","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6}]}]},"page":{"version":3,"kind":"Notebook","sha256":"ca4039be80c9054f0fa0afa15f6902583338c08d8cbc4eed34c3345c50323cc2","slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.d3-js-lc-classes","location":"/external_notebooks/esa-cci/ect-demonstrators/demonstrators/D3_js/D3_js_LC_Classes.ipynb","dependencies":[],"frontmatter":{"title":"Visualising Land Cover Class Change with Altair","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"github":"https://github.com/esa-cci/cci-notebook-viewers","subject":"CCI Examples","numbering":{"title":{"offset":5}},"source_url":"https://github.com/esa-cci/cci-notebook-viewers/blob/main/external_notebooks/esa-cci/ect-demonstrators/demonstrators/D3_js/D3_js_LC_Classes.ipynb","edit_url":"https://github.com/esa-cci/cci-notebook-viewers/edit/main/external_notebooks/esa-cci/ect-demonstrators/demonstrators/D3_js/D3_js_LC_Classes.ipynb","exports":[{"format":"ipynb","filename":"D3_js_LC_Classes.ipynb","url":"/cci-demonstrator-viewers/build/D3_js_LC_Classes-ace80c2256287d73db4a3c5525050811.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This notebook is one of three notebooks that serve to show how the ESA CCI Toolbox can be used with D3.js. Here, we will show how the classes of a Land Cover Dataset can be summed up and their change over time can be visualised in a D3.js chart accessed over the Altair library. Several preprocessing steps are applied, partly using operations from the CCI Toolbox.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EA7a5fCCK5"}],"key":"KUH2hDa6py"}],"key":"rgoQddp241"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"For this notebook, we use the altair library. Install it into your Python environment if you haven’t already done so:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kpxmimUe18"}],"key":"MVYiG4wcNd"}],"key":"CEiD9v7xMk"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# ! mamba install --yes altair","key":"F269zVuy9Y"},{"type":"outputs","id":"kR5wyXlKq4T8lgMWp80Ed","children":[],"key":"DmLuZSnac1"}],"key":"rLWm7XlvhW"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we can make all the necessary imports.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oaNAAVYOPP"}],"key":"C1QK6B2L0f"}],"key":"NpELbEU2UA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import altair as alt\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\n\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import open_data","key":"oLrjQB3gOr"},{"type":"outputs","id":"6ckZCdLJTm5ZRSWc6CULy","children":[],"key":"c3ki8WHKoP"}],"key":"QLOfZpZXw4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We start by listing all the Land Cover Datasets. For more information on Land Cover Data, see here: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"f9OgEvl5IO"},{"type":"link","url":"https://climate.esa.int/en/projects/land-cover/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"https://​climate​.esa​.int​/en​/projects​/land​-cover/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u8OoL5X4Ya"}],"urlSource":"https://climate.esa.int/en/projects/land-cover/","key":"um95wHtYXT"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nGCKjwquGp"}],"key":"rFtBGCvgKy"}],"key":"L2pwHsHnyy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"list_ecv_datasets(\"LC\")","key":"TdhQ7Cf5Ob"},{"type":"outputs","id":"chLNHvQFMR1mYfgEblrh3","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/plain":{"content":"[('esacci.LC.13-yrs.L4.WB.ASAR.Envisat.Map.4-0.r1', 'esa-cci'),\n ('esacci.LC.5-yrs.L4.CHANGE.multi-sensor.multi-platform.HRLCC30-A01.v1-2.Africa',\n  'esa-cci'),\n ('esacci.LC.5-yrs.L4.CHANGE.multi-sensor.multi-platform.HRLCC30-A02.v1-2.Amazonia',\n  'esa-cci'),\n ('esacci.LC.5-yrs.L4.CHANGE.multi-sensor.multi-platform.HRLCC30-A03.v1-2.Siberia',\n  'esa-cci'),\n ('esacci.LC.5-yrs.L4.Map.multi-sensor.multi-platform.HRLC30-A01.v1-2.Africa',\n  'esa-cci'),\n ('esacci.LC.5-yrs.L4.Map.multi-sensor.multi-platform.HRLC30-A02.v1-2.Amazonia',\n  'esa-cci'),\n ('esacci.LC.5-yrs.L4.Map.multi-sensor.multi-platform.HRLC30-A03.v1-2.Siberia',\n  'esa-cci'),\n ('esacci.LC.yr.L4.LCCS.multi-sensor.multi-platform.Map.2-0-7.r1', 'esa-cci'),\n ('esacci.LC.yr.L4.Map.multi-sensor.multi-platform.HRLC10-A01.v1-2.Africa',\n  'esa-cci'),\n ('esacci.LC.yr.L4.Map.multi-sensor.multi-platform.HRLC10-A02.v1-2.Amazonia',\n  'esa-cci'),\n ('esacci.LC.yr.L4.Map.multi-sensor.multi-platform.HRLC10-A03.v1-2.Siberia',\n  'esa-cci'),\n ('esacci.LC.yr.L4.PFT.Unspecified.Unspecified.Map.2-0-8.r1', 'esa-cci'),\n ('ESACCI-LC-L4-LCCS-Map-300m-P1Y-1992-2015-v2.0.7b-kr1.1', 'esa-cci-kc'),\n ('ESACCI-LC-L4-PFT-Map-300m-P1Y-1992-2020-v2.0.8-kr1.1', 'esa-cci-kc'),\n ('ESACCI-LC-L4-LCCS-Map-300m-P1Y-1992-2015-v2.0.7b.zarr', 'esa-cci-zarr')]","content_type":"text/plain"}}},"children":[],"key":"FHjebkhkul"}],"key":"hgYt2Mgbz6"}],"key":"Gx6j1mpz4b"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Of these, we open the one provided from the zarr store, using the toolbox’ ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OF1oHT628W"},{"type":"inlineCode","value":"open_data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"loAU2PCTxq"},{"type":"text","value":" function. Note this method returns a tuple, consisting of the data and its identifier. We are only interested in the data here.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sq8yN3Dc6i"}],"key":"A5mMTzh3U2"}],"key":"NbaPgCK1vk"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"lc_ds, _ = open_data(\"ESACCI-LC-L4-LCCS-Map-300m-P1Y-1992-2015-v2.0.7b.zarr\", data_store_id=\"esa-cci-zarr\")\nlc_ds","key":"X39xD2vW3o"},{"type":"outputs","id":"TP-a23l1dP0k30XTA5Ein","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"23091eb5e54710e409d264614e0356d0","path":"/cci-demonstrator-viewers/build/23091eb5e54710e409d264614e0356d0.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e Size: 4TB\nDimensions:              (time: 24, lat: 64800, lon: 129600)\nCoordinates:\n  * lat                  (lat) float32 259kB 90.0 90.0 89.99 ... -90.0 -90.0\n  * lon                  (lon) float32 518kB -180.0 -180.0 ... 180.0 180.0\n  * time                 (time) datetime64[ns] 192B 1992-07-02 ... 2015-07-03\nData variables:\n    change_count         (time, lat, lon) float32 806GB dask.array\u003cchunksize=(1, 2592, 1296), meta=np.ndarray\u003e\n    current_pixel_state  (time, lat, lon) float32 806GB dask.array\u003cchunksize=(1, 2592, 1296), meta=np.ndarray\u003e\n    lccs_class           (time, lat, lon) float32 806GB dask.array\u003cchunksize=(1, 2592, 1296), meta=np.ndarray\u003e\n    observation_count    (time, lat, lon) float32 806GB dask.array\u003cchunksize=(1, 2592, 1296), meta=np.ndarray\u003e\n    processed_flag       (time, lat, lon) float32 806GB dask.array\u003cchunksize=(1, 2592, 1296), meta=np.ndarray\u003e\nAttributes: (12/40)\n    Conventions:                CF-1.6\n    TileSize:                   2048:2048\n    catalogue_url:              https://catalogue.ceda.ac.uk/uuid/b382ebe6679...\n    cdm_data_type:              grid\n    comment:                    \n    contact:                    landcover-cci@uclouvain.be\n    ...                         ...\n    time_coverage_end:          20150703T000000Z\n    time_coverage_resolution:   P1Y\n    time_coverage_start:        20150703T000000Z\n    title:                      ESA CCI Land Cover Map\n    tracking_id:                12590bad-9014-4a91-9048-d06b67965490\n    type:                       ESACCI-LC-L4-LCCS-Map-300m-P1Y","content_type":"text/plain"}}},"children":[],"key":"EMpKLYdzVS"}],"key":"Gifmi2QhLy"}],"key":"Rho3FLflAD"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This dataset shows global land cover classes for the years from 1992 to 2015. The spatial is very large. We therefore want to focus on a smaller region, covering the Amazon rain forest. For subsetting, we use the toolbox’ ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SYVNBvWUe4"},{"type":"inlineCode","value":"subset_spatial","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fCFhatTd61"},{"type":"text","value":" operation. The region is passed in as a string in the form of “min_lon, min_lat, max_lon, max_lat”.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zEBHejQ3KW"}],"key":"FMCQlYj2eJ"}],"key":"o8Q9CU5xGu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"subset_spatial = get_op(\"subset_spatial\")\nlc_ds_sub = subset_spatial(lc_ds, region=\"-61, -5, -47, 2\")\nlc_ds_sub","key":"SkF2BRzL0t"},{"type":"outputs","id":"HDAQ57wfGflLG9Tx4jVmA","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"4b2002e505f7c62cb7e285e75bfd3399","path":"/cci-demonstrator-viewers/build/4b2002e505f7c62cb7e285e75bfd3399.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e Size: 6GB\nDimensions:              (time: 24, lat: 2520, lon: 5042)\nCoordinates:\n  * lat                  (lat) float32 10kB 1.999 1.996 1.993 ... -4.996 -4.999\n  * lon                  (lon) float32 20kB -61.0 -61.0 -61.0 ... -47.0 -47.0\n  * time                 (time) datetime64[ns] 192B 1992-07-02 ... 2015-07-03\nData variables:\n    change_count         (time, lat, lon) float32 1GB dask.array\u003cchunksize=(1, 2016, 1225), meta=np.ndarray\u003e\n    current_pixel_state  (time, lat, lon) float32 1GB dask.array\u003cchunksize=(1, 2016, 1225), meta=np.ndarray\u003e\n    lccs_class           (time, lat, lon) float32 1GB dask.array\u003cchunksize=(1, 2016, 1225), meta=np.ndarray\u003e\n    observation_count    (time, lat, lon) float32 1GB dask.array\u003cchunksize=(1, 2016, 1225), meta=np.ndarray\u003e\n    processed_flag       (time, lat, lon) float32 1GB dask.array\u003cchunksize=(1, 2016, 1225), meta=np.ndarray\u003e\nAttributes: (12/42)\n    Conventions:                CF-1.6\n    TileSize:                   2048:2048\n    catalogue_url:              https://catalogue.ceda.ac.uk/uuid/b382ebe6679...\n    cdm_data_type:              grid\n    comment:                    \n    contact:                    landcover-cci@uclouvain.be\n    ...                         ...\n    time_coverage_start:        20150703T000000Z\n    title:                      ESA CCI Land Cover Map\n    tracking_id:                12590bad-9014-4a91-9048-d06b67965490\n    type:                       ESACCI-LC-L4-LCCS-Map-300m-P1Y\n    geospatial_bounds_crs:      CRS84\n    geospatial_bounds:          POLYGON((-61.002777099609375 -5.0, -61.002777...","content_type":"text/plain"}}},"children":[],"key":"RTX4cKtbjo"}],"key":"y3f2sduK7w"}],"key":"RXTqGFju7P"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we have made the dataset somewhat smaller, we may plot the data for the first and last timestep.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MsNnpMux7w"}],"key":"y1BqeHsmtk"}],"key":"GxypSTOZ8N"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%matplotlib inline\nlc_ds_sub.lccs_class.isel(time=0).plot(figsize=(10, 5))","key":"Ao1oYKiklH"},{"type":"outputs","id":"h3H3ncUvwSo_J_inIwLPL","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"d8d6e538ac63338ed1f171f0ca55d579","path":"/cci-demonstrator-viewers/build/d8d6e538ac63338ed1f171f0ca55d579.png"},"text/plain":{"content":"\u003cFigure size 1000x500 with 2 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"bRM2SkQThp"}],"key":"b24gdZOj59"}],"key":"v7hd2OvtVc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"lc_ds_sub.lccs_class.isel(time=-1).plot(figsize=(10, 5))","key":"rdcFKC5TxP"},{"type":"outputs","id":"RLcfvYL3ZWE3t7qp17_Sg","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"6ed7feec61b7f3896cd4d3e1128ab952","path":"/cci-demonstrator-viewers/build/6ed7feec61b7f3896cd4d3e1128ab952.png"},"text/plain":{"content":"\u003cFigure size 1000x500 with 2 Axes\u003e","content_type":"text/plain"}}},"children":[],"key":"tqA4cHN81f"}],"key":"JjLvPPi8pc"}],"key":"I3vdJvc3MM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"It seems there are some differences. It might be good to look them up in more detail. If we look at the metadata of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dw88atMcYy"},{"type":"inlineCode","value":"lccs_class","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U2nocD1mgB"},{"type":"text","value":", we see that flags and their meanings are defined. We have a look at the flag values first.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Onjdzl0Vfv"}],"key":"Yh3oHCtvQY"}],"key":"lLXt9W4hjz"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"lc_flag_values = np.array(lc_ds_sub.lccs_class.attrs.get(\"flag_values\"))\nlc_flag_values","key":"i6QJAJuMnu"},{"type":"outputs","id":"sGjVGlKmWkFNXZLvpxUGZ","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"array([   0,   10,   11,   12,   20,   30,   40,   50,   60,   61,   62,\n         70,   71,   72,   80,   81,   82,   90,  100,  110,  120,  121,\n        122, -126, -116, -106, -105, -104, -103,  -96,  -86,  -76,  -66,\n        -56,  -55,  -54,  -46,  -36])","content_type":"text/plain"}}},"children":[],"key":"jZhbOvoHnP"}],"key":"eI5hB8y325"}],"key":"cD9aJEzZzf"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Apparently, there was a mix-up with unsigned values. To account for this, we add the value 256 to all negative flag values in this list (not in the dataset itself, where the values are fine).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e8HSuGWBgQ"}],"key":"Ev23LrISbK"}],"key":"YQScM9ZuYe"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"lc_flag_values = np.where(lc_flag_values \u003c 0, lc_flag_values + 256, lc_flag_values).astype(np.uint8)\nlc_flag_values","key":"aKABWjekpS"},{"type":"outputs","id":"CBhx1JSbXvwtFUI0GTn4c","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":9,"metadata":{},"data":{"text/plain":{"content":"array([  0,  10,  11,  12,  20,  30,  40,  50,  60,  61,  62,  70,  71,\n        72,  80,  81,  82,  90, 100, 110, 120, 121, 122, 130, 140, 150,\n       151, 152, 153, 160, 170, 180, 190, 200, 201, 202, 210, 220],\n      dtype=uint8)","content_type":"text/plain"}}},"children":[],"key":"ON2tFTTtqy"}],"key":"FIJFpq3HAC"}],"key":"ZSeUzqn5yb"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This is better. We now extract the flag meanings. As these are given in one big string, we split it whenver we encounter a space.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CVhnzdxTsp"}],"key":"Wljt7QeE6e"}],"key":"A1HIZYSaQR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"lc_flag_meanings = lc_ds_sub.lccs_class.attrs.get(\"flag_meanings\")\nlc_flag_meanings = lc_flag_meanings.split(\" \")\nlc_flag_meanings","key":"w9CuyP5i9G"},{"type":"outputs","id":"tUV4_XFtLC811K5DrMf9H","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":10,"metadata":{},"data":{"text/plain":{"content":"['no_data',\n 'cropland_rainfed',\n 'cropland_rainfed_herbaceous_cover',\n 'cropland_rainfed_tree_or_shrub_cover',\n 'cropland_irrigated',\n 'mosaic_cropland',\n 'mosaic_natural_vegetation',\n 'tree_broadleaved_evergreen_closed_to_open',\n 'tree_broadleaved_deciduous_closed_to_open',\n 'tree_broadleaved_deciduous_closed',\n 'tree_broadleaved_deciduous_open',\n 'tree_needleleaved_evergreen_closed_to_open',\n 'tree_needleleaved_evergreen_closed',\n 'tree_needleleaved_evergreen_open',\n 'tree_needleleaved_deciduous_closed_to_open',\n 'tree_needleleaved_deciduous_closed',\n 'tree_needleleaved_deciduous_open',\n 'tree_mixed',\n 'mosaic_tree_and_shrub',\n 'mosaic_herbaceous',\n 'shrubland',\n 'shrubland_evergreen',\n 'shrubland_deciduous',\n 'grassland',\n 'lichens_and_mosses',\n 'sparse_vegetation',\n 'sparse_tree',\n 'sparse_shrub',\n 'sparse_herbaceous',\n 'tree_cover_flooded_fresh_or_brakish_water',\n 'tree_cover_flooded_saline_water',\n 'shrub_or_herbaceous_cover_flooded',\n 'urban',\n 'bare_areas',\n 'bare_areas_consolidated',\n 'bare_areas_unconsolidated',\n 'water',\n 'snow_and_ice']","content_type":"text/plain"}}},"children":[],"key":"NgSQBjIHeD"}],"key":"rnbtPrdkLA"}],"key":"Jd0362EU0S"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we simply combine these to have pairs of flag values and flag meanings.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UJunfEG3fA"}],"key":"fq0TFNAWra"}],"key":"uOwSX6qazt"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"lc_flags = [(lc_flag_values[i], lc_flag_meanings[i]) for i in range(len(lc_flag_values))]\nlc_flags","key":"tQ0CV6zBZD"},{"type":"outputs","id":"FTDo18T5D6x7YGiu2aKZ8","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/plain":{"content":"[(np.uint8(0), 'no_data'),\n (np.uint8(10), 'cropland_rainfed'),\n (np.uint8(11), 'cropland_rainfed_herbaceous_cover'),\n (np.uint8(12), 'cropland_rainfed_tree_or_shrub_cover'),\n (np.uint8(20), 'cropland_irrigated'),\n (np.uint8(30), 'mosaic_cropland'),\n (np.uint8(40), 'mosaic_natural_vegetation'),\n (np.uint8(50), 'tree_broadleaved_evergreen_closed_to_open'),\n (np.uint8(60), 'tree_broadleaved_deciduous_closed_to_open'),\n (np.uint8(61), 'tree_broadleaved_deciduous_closed'),\n (np.uint8(62), 'tree_broadleaved_deciduous_open'),\n (np.uint8(70), 'tree_needleleaved_evergreen_closed_to_open'),\n (np.uint8(71), 'tree_needleleaved_evergreen_closed'),\n (np.uint8(72), 'tree_needleleaved_evergreen_open'),\n (np.uint8(80), 'tree_needleleaved_deciduous_closed_to_open'),\n (np.uint8(81), 'tree_needleleaved_deciduous_closed'),\n (np.uint8(82), 'tree_needleleaved_deciduous_open'),\n (np.uint8(90), 'tree_mixed'),\n (np.uint8(100), 'mosaic_tree_and_shrub'),\n (np.uint8(110), 'mosaic_herbaceous'),\n (np.uint8(120), 'shrubland'),\n (np.uint8(121), 'shrubland_evergreen'),\n (np.uint8(122), 'shrubland_deciduous'),\n (np.uint8(130), 'grassland'),\n (np.uint8(140), 'lichens_and_mosses'),\n (np.uint8(150), 'sparse_vegetation'),\n (np.uint8(151), 'sparse_tree'),\n (np.uint8(152), 'sparse_shrub'),\n (np.uint8(153), 'sparse_herbaceous'),\n (np.uint8(160), 'tree_cover_flooded_fresh_or_brakish_water'),\n (np.uint8(170), 'tree_cover_flooded_saline_water'),\n (np.uint8(180), 'shrub_or_herbaceous_cover_flooded'),\n (np.uint8(190), 'urban'),\n (np.uint8(200), 'bare_areas'),\n (np.uint8(201), 'bare_areas_consolidated'),\n (np.uint8(202), 'bare_areas_unconsolidated'),\n (np.uint8(210), 'water'),\n (np.uint8(220), 'snow_and_ice')]","content_type":"text/plain"}}},"children":[],"key":"MJ14l2rt8o"}],"key":"sYbYk6HQtw"}],"key":"UKAJoqlJgZ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As the metadata is prepared, we can continue with preparing the LC dataset to be used with Altair. Now, as Altair expects pandas dataframes, we need to convert it. We could use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OlWvCHeFQB"},{"type":"inlineCode","value":"to_dataframe","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Qj0kNzMquB"},{"type":"text","value":" operation from the toolbox (which eventually is used in the other notebooks), but here we want to apply an additional step, where we count the number of occurences per class in each year. We therefore write a dedicated function. As this takes a little time to complete, we print out the time as means to measure the progress.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sMMVh6LsKY"}],"key":"NeANTRIjM3"}],"key":"b9TRvsKKCU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"lc_data = []\nfor i, t in enumerate(lc_ds_sub.time):\n    date = pd.Timestamp(t.values).strftime(\"%Y-%m-%d\")\n    print(date)\n    for lc_flag, lc_flag_name in lc_flags:\n        if lc_flag_name == \"no_data\":\n            continue\n        flag_count = (lc_ds_sub.isel(time=i)[\"lccs_class\"] == lc_flag).sum().values\n        lc_data.append({\n            \"date\": date,\n            \"lc_class\": lc_flag_name,\n            \"lc_count\": flag_count\n        })\ndf = pd.DataFrame(lc_data)\ndf","key":"lgfejKW0cP"},{"type":"outputs","id":"ZkJnlGiDgs5FPd4wCojA6","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"1992-07-02\n1993-07-03\n1994-07-03\n1995-07-03\n1996-07-02\n1997-07-03\n1998-07-03\n1999-07-03\n2000-07-02\n2001-07-03\n2002-07-03\n2003-07-03\n2004-07-02\n2005-07-03\n2006-07-03\n2007-07-03\n2008-07-02\n2009-07-03\n2010-07-03\n2011-07-03\n2012-07-02\n2013-07-03\n2014-07-03\n2015-07-03\n"},"children":[],"key":"SCF0zeYnXd"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":12,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003edate\u003c/th\u003e\n      \u003cth\u003elc_class\u003c/th\u003e\n      \u003cth\u003elc_count\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e0\u003c/th\u003e\n      \u003ctd\u003e1992-07-02\u003c/td\u003e\n      \u003ctd\u003ecropland_rainfed\u003c/td\u003e\n      \u003ctd\u003e3759\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1\u003c/th\u003e\n      \u003ctd\u003e1992-07-02\u003c/td\u003e\n      \u003ctd\u003ecropland_rainfed_herbaceous_cover\u003c/td\u003e\n      \u003ctd\u003e16131\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2\u003c/th\u003e\n      \u003ctd\u003e1992-07-02\u003c/td\u003e\n      \u003ctd\u003ecropland_rainfed_tree_or_shrub_cover\u003c/td\u003e\n      \u003ctd\u003e0\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e3\u003c/th\u003e\n      \u003ctd\u003e1992-07-02\u003c/td\u003e\n      \u003ctd\u003ecropland_irrigated\u003c/td\u003e\n      \u003ctd\u003e0\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e4\u003c/th\u003e\n      \u003ctd\u003e1992-07-02\u003c/td\u003e\n      \u003ctd\u003emosaic_cropland\u003c/td\u003e\n      \u003ctd\u003e312463\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e...\u003c/th\u003e\n      \u003ctd\u003e...\u003c/td\u003e\n      \u003ctd\u003e...\u003c/td\u003e\n      \u003ctd\u003e...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e883\u003c/th\u003e\n      \u003ctd\u003e2015-07-03\u003c/td\u003e\n      \u003ctd\u003ebare_areas\u003c/td\u003e\n      \u003ctd\u003e574\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e884\u003c/th\u003e\n      \u003ctd\u003e2015-07-03\u003c/td\u003e\n      \u003ctd\u003ebare_areas_consolidated\u003c/td\u003e\n      \u003ctd\u003e0\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e885\u003c/th\u003e\n      \u003ctd\u003e2015-07-03\u003c/td\u003e\n      \u003ctd\u003ebare_areas_unconsolidated\u003c/td\u003e\n      \u003ctd\u003e0\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e886\u003c/th\u003e\n      \u003ctd\u003e2015-07-03\u003c/td\u003e\n      \u003ctd\u003ewater\u003c/td\u003e\n      \u003ctd\u003e1516228\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e887\u003c/th\u003e\n      \u003ctd\u003e2015-07-03\u003c/td\u003e\n      \u003ctd\u003esnow_and_ice\u003c/td\u003e\n      \u003ctd\u003e0\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e888 rows × 3 columns\u003c/p\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"           date                              lc_class lc_count\n0    1992-07-02                      cropland_rainfed     3759\n1    1992-07-02     cropland_rainfed_herbaceous_cover    16131\n2    1992-07-02  cropland_rainfed_tree_or_shrub_cover        0\n3    1992-07-02                    cropland_irrigated        0\n4    1992-07-02                       mosaic_cropland   312463\n..          ...                                   ...      ...\n883  2015-07-03                            bare_areas      574\n884  2015-07-03               bare_areas_consolidated        0\n885  2015-07-03             bare_areas_unconsolidated        0\n886  2015-07-03                                 water  1516228\n887  2015-07-03                          snow_and_ice        0\n\n[888 rows x 3 columns]","content_type":"text/plain"}}},"children":[],"key":"uBEJgfisf8"}],"key":"rFPBF9Ev53"}],"key":"VKHSJ4kRaX"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We end up with a dataframe that can be used with Altair. However, on closer inspection, there are a few classes that are not present in our subset. We remove these from the dataframe.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FRr2uXhBkS"}],"key":"hwfmuhcxkq"}],"key":"RF7eUvB0FS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"for lc_flag, lc_flag_name in lc_flags:\n    lc_count_sum = df[df[\"lc_class\"] == lc_flag_name].lc_count.sum()\n    if lc_count_sum == 0:\n        print(f\"Removing {lc_flag_name} from data frame\")\n        df = df[df[\"lc_class\"] != lc_flag_name]\ndf","key":"M80pRneZLf"},{"type":"outputs","id":"B6uhkr_5_jC44Y79596WU","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Removing no_data from data frame\nRemoving cropland_rainfed_tree_or_shrub_cover from data frame\nRemoving cropland_irrigated from data frame\nRemoving tree_needleleaved_evergreen_closed_to_open from data frame\nRemoving tree_needleleaved_evergreen_closed from data frame\nRemoving tree_needleleaved_evergreen_open from data frame\nRemoving tree_needleleaved_deciduous_closed from data frame\nRemoving tree_needleleaved_deciduous_open from data frame\nRemoving tree_mixed from data frame\nRemoving shrubland_evergreen from data frame\nRemoving shrubland_deciduous from data frame\nRemoving lichens_and_mosses from data frame\nRemoving sparse_tree from data frame\nRemoving sparse_shrub from data frame\nRemoving bare_areas_consolidated from data frame\nRemoving bare_areas_unconsolidated from data frame\nRemoving snow_and_ice from data frame\n"},"children":[],"key":"mDr8uNAQXE"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003edate\u003c/th\u003e\n      \u003cth\u003elc_class\u003c/th\u003e\n      \u003cth\u003elc_count\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e0\u003c/th\u003e\n      \u003ctd\u003e1992-07-02\u003c/td\u003e\n      \u003ctd\u003ecropland_rainfed\u003c/td\u003e\n      \u003ctd\u003e3759\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1\u003c/th\u003e\n      \u003ctd\u003e1992-07-02\u003c/td\u003e\n      \u003ctd\u003ecropland_rainfed_herbaceous_cover\u003c/td\u003e\n      \u003ctd\u003e16131\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e4\u003c/th\u003e\n      \u003ctd\u003e1992-07-02\u003c/td\u003e\n      \u003ctd\u003emosaic_cropland\u003c/td\u003e\n      \u003ctd\u003e312463\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e5\u003c/th\u003e\n      \u003ctd\u003e1992-07-02\u003c/td\u003e\n      \u003ctd\u003emosaic_natural_vegetation\u003c/td\u003e\n      \u003ctd\u003e72470\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e6\u003c/th\u003e\n      \u003ctd\u003e1992-07-02\u003c/td\u003e\n      \u003ctd\u003etree_broadleaved_evergreen_closed_to_open\u003c/td\u003e\n      \u003ctd\u003e9744931\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e...\u003c/th\u003e\n      \u003ctd\u003e...\u003c/td\u003e\n      \u003ctd\u003e...\u003c/td\u003e\n      \u003ctd\u003e...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e880\u003c/th\u003e\n      \u003ctd\u003e2015-07-03\u003c/td\u003e\n      \u003ctd\u003etree_cover_flooded_saline_water\u003c/td\u003e\n      \u003ctd\u003e21072\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e881\u003c/th\u003e\n      \u003ctd\u003e2015-07-03\u003c/td\u003e\n      \u003ctd\u003eshrub_or_herbaceous_cover_flooded\u003c/td\u003e\n      \u003ctd\u003e229015\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e882\u003c/th\u003e\n      \u003ctd\u003e2015-07-03\u003c/td\u003e\n      \u003ctd\u003eurban\u003c/td\u003e\n      \u003ctd\u003e15941\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e883\u003c/th\u003e\n      \u003ctd\u003e2015-07-03\u003c/td\u003e\n      \u003ctd\u003ebare_areas\u003c/td\u003e\n      \u003ctd\u003e574\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e886\u003c/th\u003e\n      \u003ctd\u003e2015-07-03\u003c/td\u003e\n      \u003ctd\u003ewater\u003c/td\u003e\n      \u003ctd\u003e1516228\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e504 rows × 3 columns\u003c/p\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"           date                                   lc_class lc_count\n0    1992-07-02                           cropland_rainfed     3759\n1    1992-07-02          cropland_rainfed_herbaceous_cover    16131\n4    1992-07-02                            mosaic_cropland   312463\n5    1992-07-02                  mosaic_natural_vegetation    72470\n6    1992-07-02  tree_broadleaved_evergreen_closed_to_open  9744931\n..          ...                                        ...      ...\n880  2015-07-03            tree_cover_flooded_saline_water    21072\n881  2015-07-03          shrub_or_herbaceous_cover_flooded   229015\n882  2015-07-03                                      urban    15941\n883  2015-07-03                                 bare_areas      574\n886  2015-07-03                                      water  1516228\n\n[504 rows x 3 columns]","content_type":"text/plain"}}},"children":[],"key":"zdepbyqx8J"}],"key":"FtVD2pnRG6"}],"key":"T2CYanPcpn"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Finally, we can create a stacked chart from the Altair library. We assign the x-axis to display the date, the y-axis to show the occurences per class, and we assign a different color to each of the classes.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hctI9rHd6m"}],"key":"pQbM3GYJPv"}],"key":"tVYqAW6vrc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"alt.Chart(df).mark_area().encode(\n    x=\"date:T\",\n    y=alt.Y(\"lc_count:Q\"),\n    color=\"lc_class:N\"\n)","key":"CSlZSLwwoE"},{"type":"outputs","id":"EtIqZlWP4lfWBNj5uaTbq","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":14,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"c49383c77663c0f7a9aa3598b2051ffa","path":"/cci-demonstrator-viewers/build/c49383c77663c0f7a9aa3598b2051ffa.html"},"text/plain":{"content":"alt.Chart(...)","content_type":"text/plain"}}},"children":[],"key":"dsxFqIBiSG"}],"key":"Er7LTUo79P"}],"key":"wJAS0AaPXd"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A clear increase of cropland becomes visible, with a simultaneous decrease of natural herbaceous vegetation. Note that on the top right of the chart, you can open a menu that provides you with image export options, as well as an alternative insight into the data.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Uy7WiUDTVa"}],"key":"SyhU7MngSF"}],"key":"ibjIpSw1FE"}],"key":"S5U0abNIjV"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"D3.js Demonstrators","url":"/external-notebooks/esa-cci/ect-demonstrators/demonstrators/d3-js/readme","group":"D3 Js"},"next":{"title":"Visualizing Cloud Fraction Uncertainties with Altair and Plotly","url":"/external-notebooks/esa-cci/ect-demonstrators/demonstrators/d3-js/d3-js-visualise-uncertainties","group":"D3 Js"}}},"domain":"http://localhost:3000"},"project":{"subject":"CCI Examples","title":"CCI Examples","description":"Collection of examples relevant to the CCI activity","github":"https://github.com/esa-cci/cci-notebook-viewers","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Esa Cci","level":2},{"title":"Ect Demonstrators","level":3},{"slug":"external-notebooks.esa-cci.ect-demonstrators.readme","title":"ect-demonstrators","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Demonstrators","level":4},{"title":"Airflow","level":5},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.airflow.readme","title":"Airflow Demonstrator","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"CDSE","level":5},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.cdse.matching-fire-data-with-sentinel-2-observations","title":"Matching FIRE Data with Sentinel-2 Observations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.cdse.matching-lst-data-with-a-sentinel-3-cube","title":"Matching LST Data with a Sentinel-3 Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.cdse.readme","title":"CDSE Demonstrators","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"D3 Js","level":5},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.readme","title":"D3.js Demonstrators","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.d3-js-lc-classes","title":"Visualising Land Cover Class Change with Altair","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.d3-js-visualise-uncertainties","title":"Visualizing Cloud Fraction Uncertainties with Altair and Plotly","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.d3-js.d3-js-visualize-4d-data","title":"Visualizing 4-dimensional Data with Altair and Plotly","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/cci-demonstrator-viewers/build/manifest-5D5D9E8C.js";
import * as route0 from "/cci-demonstrator-viewers/build/root-AA24SA6C.js";
import * as route1 from "/cci-demonstrator-viewers/build/routes/$-5SFLQWPV.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/cci-demonstrator-viewers/build/entry.client-PCJPW7TK.js");</script></body></html>