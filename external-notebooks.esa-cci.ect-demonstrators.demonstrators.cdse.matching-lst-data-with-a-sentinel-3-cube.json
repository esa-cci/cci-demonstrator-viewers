{"version":3,"kind":"Notebook","sha256":"fac5b711a30856220f7e65ca95da39791e4ea5a5950a36db70299c16c5998c35","slug":"external-notebooks.esa-cci.ect-demonstrators.demonstrators.cdse.matching-lst-data-with-a-sentinel-3-cube","location":"/external_notebooks/esa-cci/ect-demonstrators/demonstrators/CDSE/Matching_LST_Data_with_a_Sentinel-3_Cube.ipynb","dependencies":[],"frontmatter":{"title":"Matching LST Data with a Sentinel-3 Cube","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"github":"https://github.com/esa-cci/cci-notebook-viewers","subject":"CCI Examples","numbering":{"title":{"offset":5}},"source_url":"https://github.com/esa-cci/cci-notebook-viewers/blob/main/external_notebooks/esa-cci/ect-demonstrators/demonstrators/CDSE/Matching_LST_Data_with_a_Sentinel-3_Cube.ipynb","edit_url":"https://github.com/esa-cci/cci-notebook-viewers/edit/main/external_notebooks/esa-cci/ect-demonstrators/demonstrators/CDSE/Matching_LST_Data_with_a_Sentinel-3_Cube.ipynb","exports":[{"format":"ipynb","filename":"Matching_LST_Data_with_a_Sentinel-3_Cube.ipynb","url":"/cci-demonstrator-viewers/build/Matching_LST_Data_wi-a0450c1b7fdb8a2797247258facc40ac.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This notebook serves to demonstrate how data from the CCI LST ECV can matched against an Analysis-Ready Data Cube created from Sentinel-3 Data and provided by the Copernicus Data Space Ecosystem (CDSE). For this, we open the data sets separately and apply operations, some of whom provided by the ESA CCI Toolbox, to bring the data together.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LdwNYcoR0O"}],"key":"akh7MV7uFq"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This notebook runs in any Python environment which has the following packages installed:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KKScuO6BIp"}],"key":"XIFT6FsFAH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"esa-climate-toolbox","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"BYDvGZT2qj"}],"key":"H6u4rP61pb"}],"key":"QV8wkg0y9j"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"xcube-stac","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bmhojhidSj"}],"key":"qRKHerPPtc"}],"key":"okoQ6BMqdE"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"jupyterlab","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"QVAOrCPndd"}],"key":"yDDcVXpSFc"}],"key":"NRhaXMPTNo"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"libgdal-netcdf","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"cHzLiDF1w4"}],"key":"YQKOOQQku7"}],"key":"F1RxtnGVji"}],"key":"PVz3AybDP4"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"For convenience, there is an environment.yml in the folder next to this notebook you can use to create such an environment.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"lhO2CHXzYU"}],"key":"UIKNEspRix"}],"key":"QcN4CsJRvk"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We start with necessary imports beforehand.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fTBbJ2klGR"}],"key":"PmF57bipe1"}],"key":"a4hsAQyu0n"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\n\nfrom xcube.core.store import new_data_store\n\nfrom esa_climate_toolbox.core import get_op\nfrom esa_climate_toolbox.core import list_ecv_datasets\nfrom esa_climate_toolbox.core import open_data","key":"IKtu68fPo2"},{"type":"outputs","id":"TduexD8iBSKR3nghaztBG","children":[],"key":"bjuqIyj83D"}],"key":"vAjdP5r0ak"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"%matplotlib inline","key":"nz0FIvBiCh"},{"type":"outputs","id":"eMTB5dEOQsRdfgyAVrVqI","children":[],"key":"trEWWNkcrz"}],"key":"p02dDCNF7l"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As for the notebook focussed on finding matches with single observations, we are looking for data from the CDSE that is based on Sentinel missions. Using ‘list_ecv_datasets’, we may search for datasets for any ECV. We particularly want to look for LST data derived from Sentinel data. We may look for such datasets like this:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"r1RccVgstw"}],"key":"rDjbAQJYOE"}],"key":"y3DAyQIJcE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"datasets = [(dataset, store) for dataset, store in list_ecv_datasets(\"LST\") if \"Sentinel\" in dataset]\ndatasets","key":"xmRBpFrJ5p"},{"type":"outputs","id":"iHxponrXL0vqvb6w1MmQ3","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/plain":{"content":"[('esacci.LST.day.L3C.LST.SLSTR.Sentinel-3A.SLSTRA.3-00.DAY', 'esa-cci'),\n ('esacci.LST.day.L3C.LST.SLSTR.Sentinel-3A.SLSTRA.3-00.NIGHT', 'esa-cci'),\n ('esacci.LST.day.L3C.LST.SLSTR.Sentinel-3B.SLSTRB.3-00.DAY', 'esa-cci'),\n ('esacci.LST.day.L3C.LST.SLSTR.Sentinel-3B.SLSTRB.3-00.NIGHT', 'esa-cci'),\n ('esacci.LST.mon.L3C.LST.SLSTR.Sentinel-3A.SLSTRA.3-00.DAY', 'esa-cci'),\n ('esacci.LST.mon.L3C.LST.SLSTR.Sentinel-3A.SLSTRA.3-00.NIGHT', 'esa-cci'),\n ('esacci.LST.mon.L3C.LST.SLSTR.Sentinel-3B.SLSTRB.3-00.DAY', 'esa-cci'),\n ('esacci.LST.mon.L3C.LST.SLSTR.Sentinel-3B.SLSTRB.3-00.NIGHT', 'esa-cci')]","content_type":"text/plain"}}},"children":[],"key":"zDvYczyhnm"}],"key":"xYwo7Zz1Ek"}],"key":"OrwkNAIFql"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As the Data cubes on the CDSE are provided in a daily resolution, we will pick one such dataset and open it. In particular, we want to examine extreme temperatures occurring in December 2019 in Southern Australia, so we set the region and time range accordingly when opening the dataset.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tw6cB43T1A"}],"key":"opumIX3MhD"}],"key":"ksnZ4xi0mV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"southern_australia_event_region=[131.5, -32.5, 133.5, -30.5]\nsouthern_australia_event_time_range=[\"2019-12-15\", \"2019-12-20\"]","key":"wcsncxsdBH"},{"type":"outputs","id":"N2MGcSjoXsYzZr0ELCX2B","children":[],"key":"F2mik4lsst"}],"key":"w4JkSYsJss"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"lst_ds, ds_name = open_data(\n    \"esacci.LST.day.L3C.LST.SLSTR.Sentinel-3A.SLSTRA.3-00.DAY\",\n    region=southern_australia_event_region,\n    time_range=southern_australia_event_time_range,\n    var_names=\"lst\"\n)\nlst_ds","key":"TDIXC9QUgZ"},{"type":"outputs","id":"r8FZp61YWGmATCNjqSlEk","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":5,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"1c59758718301222ad35a111ba169faf","path":"/cci-demonstrator-viewers/build/1c59758718301222ad35a111ba169faf.html"},"text/plain":{"content":"<xarray.Dataset> Size: 2MB\nDimensions:    (time: 6, lat: 200, lon: 200, channel: 2, bnds: 2)\nCoordinates:\n  * channel    (channel) float64 16B 11.0 12.0\n  * lat        (lat) float32 800B -32.49 -32.49 -32.47 ... -30.53 -30.52 -30.51\n  * lon        (lon) float32 800B 131.5 131.5 131.5 131.5 ... 133.5 133.5 133.5\n  * time       (time) datetime64[ns] 48B 2019-12-15T12:00:00 ... 2019-12-20T1...\n    time_bnds  (time, bnds) datetime64[ns] 96B dask.array<chunksize=(6, 2), meta=np.ndarray>\nDimensions without coordinates: bnds\nData variables:\n    lst        (time, lat, lon) float64 2MB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\nAttributes:\n    Conventions:             CF-1.7\n    title:                   esacci.LST.day.L3C.LST.SLSTR.Sentinel-3A.SLSTRA....\n    date_created:            2025-09-29T15:49:38.436800\n    processing_level:        L3C\n    time_coverage_start:     2019-12-15T00:00:00\n    time_coverage_end:       2019-12-21T00:00:00\n    time_coverage_duration:  P6DT0H0M0S\n    history:                 [{'program': 'xcube_cci.chunkstore.CciChunkStore...","content_type":"text/plain"}}},"children":[],"key":"RRJbwcs1oT"}],"key":"VDK2mKwyt0"}],"key":"LJmS6m0iro"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We continue with visualising all images at the same time.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qNlnNdyiAs"}],"key":"ep4LJXcv4p"}],"key":"oWSQMHenvi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def plot_six_images(ds, var_name):\n    fig, ax = plt.subplots(nrows=2, ncols=3, figsize=(20, 6), sharex=True)\n    ax = ax.ravel()\n    for i in range(len(ds.time)):\n        ds[var_name].isel(time=i).plot(ax=ax[i])","key":"PxmWHtpWkT"},{"type":"outputs","id":"Gw6-9LgRu5t1IiF1Esn0w","children":[],"key":"lloP4EfIH7"}],"key":"HDZ0UvQypL"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plot_six_images(lst_ds, \"lst\")","key":"erolbcPEYc"},{"type":"outputs","id":"8OrRmJARmBhRQcEtL-4sL","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"e868abe939a2fa24f5d9c353da358485","path":"/cci-demonstrator-viewers/build/e868abe939a2fa24f5d9c353da358485.png"},"text/plain":{"content":"<Figure size 2000x600 with 12 Axes>","content_type":"text/plain"}}},"children":[],"key":"USCIxsMNwz"}],"key":"vN2kqonQWv"}],"key":"hIbZbEt2kS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We have measurements for six conesecutive days, which is good. For purposes of conveying information, we transfer the data from Kelvin to Celsius using the ‘arithmetics’ operation.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"G2BWSNV89k"}],"key":"m0zCUmqitA"}],"key":"W8lGvmFO9M"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"arithmetics = get_op(\"arithmetics\")","key":"hyLuglENo2"},{"type":"outputs","id":"7y2YwEtOgAOe2W2HxUmvH","children":[],"key":"su2oUtTa5r"}],"key":"I5Uj5Ykt11"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"converted_lst_ds = arithmetics(lst_ds, \"-272.15\")\nconverted_lst_ds","key":"yN1URiAODf"},{"type":"outputs","id":"6xynHmNpGA1agAVLJpH_k","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":9,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"14888c92720c3fbd952aefb1bd2e5814","path":"/cci-demonstrator-viewers/build/14888c92720c3fbd952aefb1bd2e5814.html"},"text/plain":{"content":"<xarray.Dataset> Size: 2MB\nDimensions:    (channel: 2, lat: 200, lon: 200, time: 6, bnds: 2)\nCoordinates:\n  * channel    (channel) float64 16B 11.0 12.0\n  * lat        (lat) float32 800B -32.49 -32.49 -32.47 ... -30.53 -30.52 -30.51\n  * lon        (lon) float32 800B 131.5 131.5 131.5 131.5 ... 133.5 133.5 133.5\n  * time       (time) datetime64[ns] 48B 2019-12-15T12:00:00 ... 2019-12-20T1...\n    time_bnds  (time, bnds) datetime64[ns] 96B dask.array<chunksize=(6, 2), meta=np.ndarray>\nDimensions without coordinates: bnds\nData variables:\n    lst        (time, lat, lon) float64 2MB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\nAttributes:\n    Conventions:             CF-1.7\n    title:                   esacci.LST.day.L3C.LST.SLSTR.Sentinel-3A.SLSTRA....\n    date_created:            2025-09-29T15:49:38.436800\n    processing_level:        L3C\n    time_coverage_start:     2019-12-15T00:00:00\n    time_coverage_end:       2019-12-21T00:00:00\n    time_coverage_duration:  P6DT0H0M0S\n    history:                 [{'program': 'xcube_cci.chunkstore.CciChunkStore...","content_type":"text/plain"}}},"children":[],"key":"kVd5CXATFg"}],"key":"DE3iMRX2ww"}],"key":"mI6MLitbFm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plot_six_images(converted_lst_ds, \"lst\")","key":"ahskOz4TAq"},{"type":"outputs","id":"3ey40ddeikgWCkajkgoBN","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"2a9558061efa74e7616cfa55a49f995f","path":"/cci-demonstrator-viewers/build/2a9558061efa74e7616cfa55a49f995f.png"},"text/plain":{"content":"<Figure size 2000x600 with 12 Axes>","content_type":"text/plain"}}},"children":[],"key":"Y2bbOixAG8"}],"key":"qZ1KZOQhrP"}],"key":"sAmbBt0k2r"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"the conversion was successful and we now see the land surface temperature in Celsius, reaching dramatic values. We are set now to request a data cube from the CDSE with Sentinel-3 Data for the same region in time and space.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"l5bF6qtwCl"}],"key":"HQjhiu3g2d"}],"key":"zAp9dyk4N1"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We once more use the stac-cdse store and set its credentials (consider the readme for information on how to obtain them).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u4LDOoHfiG"}],"key":"waRhHQv7LD"}],"key":"t2MM6ZMJ2a"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cdse_credentials = dict(\n    key=<your_key>,\n    secret=<your_secret>\n)","key":"tG8U5gYVOo"},{"type":"outputs","id":"HcKlQ7taEHLxd-61Br1J5","children":[],"key":"tqynhRQcRS"}],"key":"V8IMQVZx75"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This time, we use the store with the identifier “stac-cdse-ardc” to ask for analysis-ready data cubes.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qlfrJQ4rVz"}],"key":"ppBd7HYw22"}],"key":"bu4RBqTeqv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"stac_cdse_ardc_store = new_data_store(\"stac-cdse-ardc\", **cdse_credentials)","key":"BX8Yh1CLiV"},{"type":"outputs","id":"sK3b6lA_Sgb1f24phbZ2Q","children":[],"key":"OMw0mgIPrq"}],"key":"nSGCcOuiEu"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we have the store, we see what data it provides.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LGlOayz7K2"}],"key":"zTfl7KtA26"}],"key":"jJI93Vnm9y"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"stac_cdse_ardc_store.list_data_ids()","key":"gUyREQLVOs"},{"type":"outputs","id":"1xn6lnUNHmIGAV0KH_a8R","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/plain":{"content":"['sentinel-2-l2a', 'sentinel-2-l1c', 'sentinel-3-syn-2-syn-ntc']","content_type":"text/plain"}}},"children":[],"key":"yEq7y3PxVc"}],"key":"wcjXSHMp5E"}],"key":"Uvchs975Zw"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"As it has Sentinel-3 Synergy Data. In addition to the region and the time range, we also specify which bands we want to open (given by asset_names), the coordinate reference system and the spatial resolution (both the same as the LST dataset). To get a fit with the LST data, we ask for the exact minimum and maximum spatial values. As assets, we ask for reflectance bands originating from the SLSTR instrument.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lRY6CJab86"}],"key":"eJWx1mLMya"}],"key":"eG8oR2KAjK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"min_lon = min(converted_lst_ds.lon.values)\nmin_lat = min(converted_lst_ds.lat.values)\nmax_lon = max(converted_lst_ds.lon.values)\nmax_lat = max(converted_lst_ds.lat.values)","key":"fyuBaXmYPa"},{"type":"outputs","id":"tt8D1mtp-NTOpwllvLYUx","children":[],"key":"icc0hhk0ce"}],"key":"Qk7LWiu3md"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"syn_ds = stac_cdse_ardc_store.open_data(\n    data_id=\"sentinel-3-syn-2-syn-ntc\",\n    bbox=[min_lon, min_lat, max_lon, max_lat],\n    time_range=southern_australia_event_time_range,\n    spatial_res=0.01,\n    crs=\"EPSG:4326\",\n    asset_names=[\"syn_S1N_reflectance\", \"syn_S2N_reflectance\"],\n)\nsyn_ds","key":"PRsjbtck4k"},{"type":"outputs","id":"UCbMYyZTF_d-nNxuHJn2Q","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":15,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"a04ae41875b2275a906415a24015edd5","path":"/cci-demonstrator-viewers/build/a04ae41875b2275a906415a24015edd5.html"},"text/plain":{"content":"<xarray.Dataset> Size: 4MB\nDimensions:      (time: 6, lat: 200, lon: 200, bnds: 2)\nCoordinates:\n  * lat          (lat) float64 2kB -30.5 -30.52 -30.52 ... -32.47 -32.48 -32.49\n  * lon          (lon) float64 2kB 131.5 131.5 131.5 131.5 ... 133.5 133.5 133.5\n    lon_bnds     (lon, bnds) float64 3kB 131.5 131.5 131.5 ... 133.5 133.5 133.5\n    lat_bnds     (lat, bnds) float64 3kB -30.5 -30.51 -30.51 ... -32.49 -32.5\n  * time         (time) datetime64[ns] 48B 2019-12-15T01:05:27.537226 ... 201...\nDimensions without coordinates: bnds\nData variables:\n    SDR_S1N      (time, lat, lon) float32 960kB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\n    SDR_S1N_err  (time, lat, lon) float32 960kB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\n    SDR_S2N      (time, lat, lon) float32 960kB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\n    SDR_S2N_err  (time, lat, lon) float32 960kB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\nAttributes:\n    stac_item_ids:       {'2019-12-15T01:05:27.537000': ['S3A_SY_2_SYN____201...\n    stac_catalog_url:    https://stac.dataspace.copernicus.eu/v1\n    xcube_stac_version:  1.1.0","content_type":"text/plain"}}},"children":[],"key":"pn5f6C3QPT"}],"key":"mstTnntEIx"}],"key":"VmgPQ1PUc8"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"When the product is ready, we may continue with deriving an index from the reflectance bands.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uXPHXV3pJy"}],"key":"cvpY8RofVw"}],"key":"mw7U8mTZ9R"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"da = (syn_ds.SDR_S1N - syn_ds.SDR_S2N) / (syn_ds.SDR_S1N + syn_ds.SDR_S2N)\nsyn_ds = syn_ds.assign(vi=da)\nsyn_ds","key":"pCqA0ZytZq"},{"type":"outputs","id":"DsQn0d5Z3jHv6Mi_B6loB","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"09f196e9bb6a4a95dbc9f62bd47358b9","path":"/cci-demonstrator-viewers/build/09f196e9bb6a4a95dbc9f62bd47358b9.html"},"text/plain":{"content":"<xarray.Dataset> Size: 5MB\nDimensions:      (time: 6, lat: 200, lon: 200, bnds: 2)\nCoordinates:\n  * lat          (lat) float64 2kB -30.5 -30.52 -30.52 ... -32.47 -32.48 -32.49\n  * lon          (lon) float64 2kB 131.5 131.5 131.5 131.5 ... 133.5 133.5 133.5\n    lon_bnds     (lon, bnds) float64 3kB 131.5 131.5 131.5 ... 133.5 133.5 133.5\n    lat_bnds     (lat, bnds) float64 3kB -30.5 -30.51 -30.51 ... -32.49 -32.5\n  * time         (time) datetime64[ns] 48B 2019-12-15T01:05:27.537226 ... 201...\nDimensions without coordinates: bnds\nData variables:\n    SDR_S1N      (time, lat, lon) float32 960kB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\n    SDR_S1N_err  (time, lat, lon) float32 960kB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\n    SDR_S2N      (time, lat, lon) float32 960kB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\n    SDR_S2N_err  (time, lat, lon) float32 960kB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\n    vi           (time, lat, lon) float32 960kB dask.array<chunksize=(1, 200, 200), meta=np.ndarray>\nAttributes:\n    stac_item_ids:       {'2019-12-15T01:05:27.537000': ['S3A_SY_2_SYN____201...\n    stac_catalog_url:    https://stac.dataspace.copernicus.eu/v1\n    xcube_stac_version:  1.1.0","content_type":"text/plain"}}},"children":[],"key":"wdtENSH7Su"}],"key":"VKCjRkwDD5"}],"key":"yGpV2ZrUeo"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Ultimately, we can plot the data the same way we plotted the LST data.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ICup3qDsKV"}],"key":"XkL4yIOGwH"}],"key":"P8VAHJBPzz"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"plot_six_images(syn_ds, \"vi\")","key":"MTJR7Atv1D"},{"type":"outputs","id":"sQZ14mP_tIB70mTVhUNxx","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"12c980b8b6aff8c44cf17baa66ef6349","path":"/cci-demonstrator-viewers/build/12c980b8b6aff8c44cf17baa66ef6349.png"},"text/plain":{"content":"<Figure size 2000x600 with 12 Axes>","content_type":"text/plain"}}},"children":[],"key":"Qcs8Lx4Vdg"}],"key":"Lajv8BVezc"}],"key":"ac7kwaorMH"}],"key":"Li9POcoQES"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Matching FIRE Data with Sentinel-2 Observations","url":"/external-notebooks/esa-cci/ect-demonstrators/demonstrators/cdse/matching-fire-data-with-sentinel-2-observations","group":"CDSE"},"next":{"title":"CDSE Demonstrators","url":"/external-notebooks/esa-cci/ect-demonstrators/demonstrators/cdse/readme","group":"CDSE"}}},"domain":"http://localhost:3000"}